<html>
<script type="text/javascript" src="https://code.createjs.com/createjs-2015.05.21.min.js"></script>
<script type="text/javascript" src="https://prufer.surge.sh/flow.min.js"></script>
<canvas id="canvasID" width="1000" height="500"></canvas>
<div id="info"></div>
<script>
var step_count = JSON.parse('%s');
var var_count = JSON.parse('%s');
var step_dt = JSON.parse('%s');
var var_dt = JSON.parse('%s');
var td_left = '<td style="text-align:left;">'
var latest_vars = [];
for(const key in var_count) {
    latest_vars.push(key + ' v' + var_count[key]);
}
var graph = new flowjs.DiGraph();
graph.addPaths(%s);
var flow = new flowjs.DiFlowChart("canvasID", graph);
flow.color = "blue";
flow.startX = flow.itemRadius;
var walker = new flowjs.GraphWalker(graph);
flow.draw();
walker.forEach(function(node){
    if (node.id in var_dt) {
        item = flow.flowItems[node.id].flowItem;
        latest = 'v' + var_count[node.id]
        if (latest_vars.includes(node.id)) item.background = "yellow";
        else item.background = "gray";
        item.circle.addEventListener("mouseover", function() {
            document.getElementById("info").innerHTML = var_dt[node.id];
        })
        item.refresh();
    }
    if (node.id in step_dt) {
        item = flow.flowItems[node.id].flowItem;
        item.background = "blue";
        item.circle.addEventListener("mouseover", function() {
            document.getElementById("info").innerHTML = step_dt[node.id];
        })
        item.refresh();
    }
}, this);
</script>
</html>